<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <!-- Site Meta Data -->
  <title>[黑科技]. 二叉树遍历</title>
  <meta name="description" content="">
  <meta name="author" content="martin">

  <!-- Style Meta Data -->
  <link rel="stylesheet" href="http://blog.smallcpp.cn/theme/css/notebook.css" type="text/css" />
  <link rel="shortcut icon" href="http://blog.smallcpp.cn/theme/images/avatar.png">

  <!-- Feed Meta Data -->
  <link href="http://blog.smallcpp.cn/" type="application/atom+xml" rel="alternate" title="Small Cpp ATOM Feed" />

  <!-- Twitter Feed -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:image" content="http://blog.smallcpp.cn/theme/images/avatar.png">

<meta name="twitter:creator" content="">
<meta name="twitter:url" content="http://blog.smallcpp.cn/hei-ke-ji-er-cha-shu-bian-li.html">
<meta name="twitter:title" content="Small Cpp ~ [黑科技]. 二叉树遍历">
<meta name="twitter:description" content="这个单独弄出来, 只是因为自己懒, 不想每次遍历时都重敲代码, 就做下笔记, 用到的时候 粘贴 复制… 就是先分析下游戏二叉树的结构, 然后自己模拟着也定义一个. #pragma pack (push,1) typedef struct _RoleTree { DWORD dwLBase; //+0x0 左树 DWORD dwSBase; //+0x4 上一层树的地址 DWORD dwRBase; //+0x8 右树 int iID …">

<!-- Facebook Meta Data -->
<meta property="og:title" content="Small Cpp ~ [黑科技]. 二叉树遍历" />
<meta property="og:description" content="这个单独弄出来, 只是因为自己懒, 不想每次遍历时都重敲代码, 就做下笔记, 用到的时候 粘贴 复制… 就是先分析下游戏二叉树的结构, 然后自己模拟着也定义一个. #pragma pack (push,1) typedef struct _RoleTree { DWORD dwLBase; //+0x0 左树 DWORD dwSBase; //+0x4 上一层树的地址 DWORD dwRBase; //+0x8 右树 int iID …" />
<meta property="og:image" content="theme/images/avatar.png" />
</head>

<body>
  <!-- Sidebar -->
  <aside>
    <p><a href="http://blog.smallcpp.cn"><img id="avatar" src="http://blog.smallcpp.cn/theme/images/avatar.png"></a></p>
    <h1>Small Cpp</h1>
    <p>勿在浮沙筑高台, 练从难处练, 用从易处用.</p>
    <hr>
    <h2>Social</h2>
    <ul class="social">
      <a href="http://blog.csdn.net/u010850265">CSDN</a></li>
    </ul>
    <h2>Categories</h2>
    <ul class="navbar">
      <li><a href="http://blog.smallcpp.cn/category/c11.html">C++11</a></li>
      <li><a href="http://blog.smallcpp.cn/category/da-shu-ju.html">大数据</a></li>
      <li><a href="http://blog.smallcpp.cn/category/du-shu-bi-ji.html">读书笔记</a></li>
      <li><a href="http://blog.smallcpp.cn/category/golang.html">Golang</a></li>
      <li class="active"><a href="http://blog.smallcpp.cn/category/hei-ke-ji.html">黑科技</a></li>
      <li><a href="http://blog.smallcpp.cn/category/java.html">Java</a></li>
      <li><a href="http://blog.smallcpp.cn/category/linux.html">Linux</a></li>
      <li><a href="http://blog.smallcpp.cn/category/lua.html">Lua</a></li>
      <li><a href="http://blog.smallcpp.cn/category/mongodb.html">Mongodb</a></li>
      <li><a href="http://blog.smallcpp.cn/category/pyqt.html">PyQt</a></li>
      <li><a href="http://blog.smallcpp.cn/category/python.html">Python</a></li>
      <li><a href="http://blog.smallcpp.cn/category/qt.html">QT</a></li>
      <li><a href="http://blog.smallcpp.cn/category/qu-kuai-lian.html">区块链</a></li>
      <li><a href="http://blog.smallcpp.cn/category/redis.html">Redis</a></li>
      <li><a href="http://blog.smallcpp.cn/category/ruan-jian-she-ji.html">软件设计</a></li>
      <li><a href="http://blog.smallcpp.cn/category/za-xiang.html">杂项</a></li>
    </ul> 
  </aside>

  <!-- Content -->
  <article>
<section id="content">
    <article>
        <header class="post_list">
            <h2 class="post_title"><a href="http://blog.smallcpp.cn/hei-ke-ji-er-cha-shu-bian-li.html" rel="bookmark" title="Permalink to [黑科技]. 二叉树遍历">[黑科技]. 二叉树遍历</a></h2>
            <span>Par </span>
            <a href="http://blog.smallcpp.cn/author/martin.html">@Martin</a>
            <span> dans </span>
            <span class="post_category"><a href="http://blog.smallcpp.cn/category/hei-ke-ji.html" rel="bookmark" title="Permalink to 黑科技">[ 黑科技 ]</a></span>
            <span> le </span>
            <span class="post_date">Sat 30 May 2015</span>
            <div></div>
            <div><span>Tags : </span>
            </div>
        </header>
        <div class="entry-content">
            <p>这个单独弄出来, 只是因为自己懒, 不想每次遍历时都重敲代码, 就做下笔记, 用到的时候 粘贴 复制…</p>
<p>就是先分析下游戏二叉树的结构, 然后自己模拟着也定义一个.</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #1e889b">#pragma pack (push,1)</span>
<span style="color: #8B008B; font-weight: bold">typedef</span> <span style="color: #8B008B; font-weight: bold">struct</span> _RoleTree {
    DWORD dwLBase;      <span style="color: #228B22">//+0x0    左树</span>
    DWORD dwSBase;      <span style="color: #228B22">//+0x4    上一层树的地址</span>
    DWORD dwRBase;      <span style="color: #228B22">//+0x8    右树</span>
    <span style="color: #00688B; font-weight: bold">int</span> iID;            <span style="color: #228B22">//+0xC    二叉树ID</span>
    DWORD dwPBase;      <span style="color: #228B22">//+0x10    数据数据指针</span>
    byte bTyep;         <span style="color: #228B22">//+0x14</span>
    byte bEnd;          <span style="color: #228B22">//+0x15    //是否到了尾节点 0为没到, 1为到了, 注意尾节点即没有左右树也没有了数据指针</span>
} RoleTree, *pRoleTree;
<span style="color: #1e889b">#pragma pack(pop)</span>

<span style="color: #00688B; font-weight: bold">void</span> <span style="color: #008b45">GetTreeAddr</span>() {
    <span style="color: #00688B; font-weight: bold">int</span> iObject = ReadMemoryPtrData&lt;<span style="color: #00688B; font-weight: bold">int</span>&gt;(Role_BaseAddr);
    iObject = ReadMemoryPtrData&lt;<span style="color: #00688B; font-weight: bold">int</span>&gt;(iObject + <span style="color: #B452CD">0x64</span>);
    iObject = ReadMemoryPtrData&lt;<span style="color: #00688B; font-weight: bold">int</span>&gt;(iObject + <span style="color: #B452CD">0x4</span>);
    TraceOutA(<span style="color: #CD5555">&quot;二叉树基址为: 0x%X&quot;</span>, iObject);
    <span style="color: #8B008B; font-weight: bold">this</span>-&gt;TraverRoleTree(iObject);
}

<span style="color: #00688B; font-weight: bold">void</span> <span style="color: #008b45">TraverRoleTree</span>(<span style="color: #00688B; font-weight: bold">int</span> iObject) {
    pRoleTree pTree;
    pTree = (pRoleTree)iObject;

    <span style="color: #8B008B; font-weight: bold">if</span> (!pTree-&gt;bEnd) {<span style="color: #228B22">//[[[pTree-&gt;dwPBase+0x1E0]+0x4]+0x2458]</span>
        <span style="color: #00688B; font-weight: bold">int</span> tmp = ReadMemoryPtrData&lt;<span style="color: #00688B; font-weight: bold">int</span>&gt;(pTree-&gt;dwPBase + <span style="color: #B452CD">0x1E0</span>);
        <span style="color: #8B008B; font-weight: bold">if</span> (tmp) {
            tmp = ReadMemoryPtrData&lt;<span style="color: #00688B; font-weight: bold">int</span>&gt;(tmp + <span style="color: #B452CD">0x4</span>);
            TraceOutA(<span style="color: #CD5555">&quot;二叉树ID为: 0x%X--数据对象为: 0x%X--怪物名: %s&quot;</span>, pTree-&gt;iID, tmp, (<span style="color: #00688B; font-weight: bold">char</span>*)(tmp + <span style="color: #B452CD">0x34</span>));
        }

        TraverRoleTree(pTree-&gt;dwLBase);
        TraverRoleTree(pTree-&gt;dwRBase);
    }
}
</pre></div>
            <div align="center" style="color:#ccc;">☠</div>
        </div>
    </article>
</section>
  </article>


</body>
</html>