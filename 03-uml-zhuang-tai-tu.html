<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>03、UML 状态图</title>

    <link rel="stylesheet" href="http://z351522453.github.com/theme/css/normalize.css" />
    <link rel="stylesheet" href="http://z351522453.github.com/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="http://z351522453.github.com/theme/css/style.css" />
    <link rel="stylesheet" href="http://z351522453.github.com/theme/css/pygments.css" />	
    <script src="http://z351522453.github.com/theme/js/modernizr.js"></script>
</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="http://z351522453.github.com">Small Cpp | 勿在浮沙筑高台, 练从难处练, 用从易处用.</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
<article>
    <header>
        <h3 class="article-title"><a href="http://z351522453.github.com/03-uml-zhuang-tai-tu.html" rel="bookmark"
        title="Permalink to 03、UML 状态图">03、UML 状态图</a></h3>
    </header>

<h6 class="subheader" title="2016-04-01T20:17:00+08:00">周五 01 四月 2016
</h6>


    <div class="toc">
<ul>
<li><a href="#_1">概述</a></li>
<li><a href="#_2">核心要素</a></li>
<li><a href="#_3">状态动作</a></li>
<li><a href="#_4">复合状态</a></li>
<li><a href="#_5">退出/进入节点</a></li>
<li><a href="#_6">子节点</a></li>
<li><a href="#_7">历史状态</a></li>
<li><a href="#_8">同步</a></li>
</ul>
</div>
<h1 id="_1">概述</h1>
<p>状态图是一种&rdquo;开关&rdquo;, 描述的是__状态变化__的图形, 即__一个__对象__状态__与__状态的转变__, 并且给出了状态变化的__起点__和__终点__, 类比__流程图__.</p>
<blockquote>
<p><strong>使用场景</strong><br>
需要描述一个对象的状态跟踪的时候, 比如一个表单在不同环节审批的状态</p>
</blockquote>
<p>在 StarUML 中新建状态图:<br>
打开 StarUML, 选择 <strong>Rational Approach</strong>.<br>
&lt;&lt;<strong>Logical View</strong>>> --> Add Diagram --> Statechart Diagram<br>
界面左边就出现了 Statechart 工具栏.</p>
<table>
<thead>
<tr>
<th>StarUML</th>
<th>翻译</th>
</tr>
</thead>
<tbody>
<tr>
<td>State</td>
<td>状态节点</td>
</tr>
<tr>
<td>SubmachineState</td>
<td>状态子节点</td>
</tr>
<tr>
<td>InitialState</td>
<td>初始状态</td>
</tr>
<tr>
<td>FinalState</td>
<td>结束状态</td>
</tr>
<tr>
<td>JunctionPoint</td>
<td>交汇点(两条状态传递线交汇处)</td>
</tr>
<tr>
<td>ChoicePoint</td>
<td>选择点(又叫进入节点)</td>
</tr>
<tr>
<td>ShallowHistory</td>
<td>浅层历史状态</td>
</tr>
<tr>
<td>DeepHistory</td>
<td>深层历史状态</td>
</tr>
<tr>
<td>Synchronization</td>
<td>同步</td>
</tr>
<tr>
<td>Flow Final</td>
<td>对象流程结束(退出节点)</td>
</tr>
<tr>
<td>Transition</td>
<td>状态传递</td>
</tr>
<tr>
<td>SelfTransition</td>
<td>自我状态传递</td>
</tr>
</tbody>
</table>
<h1 id="_2">核心要素</h1>
<p>对于状态图来说, 最为__核心__的元素无外乎是两个:</p>
<ul>
<li>一个是用圆角矩形表示的状态(State)</li>
<li>一个则是在状态之间的、包含一些文字描述的有向箭头线(Transition), 这些箭头线称为状态传递</li>
</ul>
<p><img alt="" src="http://i63.tinypic.com/29z3ifl.jpg" /></p>
<p><img alt="" src="http://i67.tinypic.com/2rcy7v6.jpg" /></p>
<ul>
<li>源状态: 即受转换影响的状态</li>
<li>目标状态: 当转换完成后对象的状态</li>
<li>触发事件: 用来为转换定义一个事件, 包括调用、改变、信号、时间四类事件</li>
<li>监护条件: 布尔表达式, 决定是否激活转换</li>
<li>动作: 转换激活时的操作</li>
</ul>
<h1 id="_3">状态动作</h1>
<p><strong>状态节点有三个内部动作</strong>:</p>
<ul>
<li>EntryActiors, 进入状态时触发的动作</li>
<li>DoActions, 状态中执行的动作</li>
<li>ExitActions, 退出状态时触发的动作</li>
</ul>
<p>当然, 这三个事件都不是必须的, 根据需求来填写.<br>
例如在上例中, 对象状态转移后的动作(<strong>烧水</strong>), 是显示在箭头线上, 也可以定义__进入动作__(EntryActions)来描述转换激活时的操作</p>
<p><img alt="" src="http://i64.tinypic.com/fuuwb4.jpg" /></p>
<h1 id="_4">复合状态</h1>
<p>另外, 在某些时候, 还可以使用__复合状态__, 它表示在某一状态中, 还维护着其它的状态.<br>
如, 在电脑运行的时候, 还会维护一个待机的状态.</p>
<p><img alt="" src="http://i68.tinypic.com/34qmj9v.jpg" /></p>
<h1 id="_5">退出/进入节点</h1>
<p>上面的图中, 除了用到了__复合状态__外, 还使用了__退出节点__(Flow Final), 它表示状态可以有多个退出事件, 如__上图__中的 <em>长按电源键</em> 或者 <em>断电</em>, 都会触发 running 状态的退出.</p>
<p>除了__退出节点__(Flow Final)外, 还有个 <strong>ChoicePoint</strong>(选择节点, 又叫进入节点), 它表示一个状态有多个进入事件, 就不放图举例了.</p>
<h1 id="_6">子节点</h1>
<p>再来看看 <strong>SubmachineState</strong>(状态子节点), 它所以表示的是该状态是另一个状态(称之为母状态)的子状态, 母状态中以__引用__的方式把一个已经存在的状态作为自己子状态, 在母状态机中子机状态作为一个子状态, 但它自身仍是一个__完整的状态__.</p>
<p><img alt="" src="http://i65.tinypic.com/14tylx3.jpg" /></p>
<h1 id="_7">历史状态</h1>
<p><strong>ShallowHistory</strong>(历史状态), 为一个状态提供了一种在退出状态时记忆当前活动所处的子状态, 并能够返回到该子状态的机制.<br>
例如下图, 当发生暂停时, 记住播放状态, 当继续播放时就直接进入播放状态.</p>
<p><img alt="" src="http://i63.tinypic.com/15wjlmh.jpg" /></p>
<blockquote>
<p>StarUML 中有 <strong>ShallowHistory</strong> 和 <strong>DeepHistory</strong>, 但在大多情况下是随便用哪个, 并没有做太多要求, 只要表达清楚这里是一个&rdquo;历史&rdquo;就可以了.</p>
</blockquote>
<h1 id="_8">同步</h1>
<p><strong>Synchronization</strong> 又分两种, 分叉与汇合.</p>
<ul>
<li>分叉: 指将一个转换分成两个或多个转换, 用来描述需要__并发__的状态</li>
<li>汇合: 指将从并发状态来的转换合并形成一个转换, 用来描述多个并发状态的控制__同步__</li>
</ul>
<p><img alt="" src="http://i68.tinypic.com/2aafsxy.jpg" /></p>
<p class="subheader">Category: <a href="http://z351522453.github.com/category/jia-gou-shi-zhi-lu.html">架构师之路</a>

</p>




</article>
    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="http://z351522453.github.com/archives.html">Archives</a>
            <li><a href="http://z351522453.github.com/tags.html">Tags</a>
        </ul>

		
        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="http://z351522453.github.com/category/ban-ben-kong-zhi.html">版本控制</a></li>
            <li><a href="http://z351522453.github.com/category/c11xin-te-xing.html">C++11新特性</a></li>
            <li><a href="http://z351522453.github.com/category/cocos2dyou-xi-kai-fa.html">Cocos2d游戏开发</a></li>
            <li><a href="http://z351522453.github.com/category/da-hua-she-ji-mo-shi.html">大话设计模式</a></li>
            <li><a href="http://z351522453.github.com/category/da-shu-ju.html">大数据</a></li>
            <li><a href="http://z351522453.github.com/category/dai-ma-da-quan.html">代碼大全</a></li>
            <li><a href="http://z351522453.github.com/category/golang.html">Golang</a></li>
            <li><a href="http://z351522453.github.com/category/hadoop.html">hadoop</a></li>
            <li><a href="http://z351522453.github.com/category/hei-ke-ji.html">黑科技</a></li>
            <li><a href="http://z351522453.github.com/category/jia-che-bao-dian.html">驾车宝典</a></li>
            <li><a href="http://z351522453.github.com/category/jia-gou-shi-zhi-lu.html">架构师之路</a></li>
            <li><a href="http://z351522453.github.com/category/ling-ji-chu-qt-ru-men.html">零基础 QT 入门</a></li>
            <li><a href="http://z351522453.github.com/category/linux.html">Linux</a></li>
            <li><a href="http://z351522453.github.com/category/luayou-xi-kai-fa.html">Lua游戏开发</a></li>
            <li><a href="http://z351522453.github.com/category/pyqt-kai-fa.html">PyQt 开发</a></li>
            <li><a href="http://z351522453.github.com/category/python-cong-ru-men-dao-fang-qi.html">Python 从入门到放弃</a></li>
            <li><a href="http://z351522453.github.com/category/shen-ru-qian-chu-flask.html">深入浅出 Flask</a></li>
            <li><a href="http://z351522453.github.com/category/shen-ru-qian-chu-mongodb.html">深入浅出 Mongodb</a></li>
            <li><a href="http://z351522453.github.com/category/shen-ru-qian-chu-redis.html">深入浅出 Redis</a></li>
            <li><a href="http://z351522453.github.com/category/za-xiang.html">杂项</a></li>
            <li><a href="http://z351522453.github.com/category/zai-xue-java.html">再学 JAVA</a></li>
   
        </ul>

        <h5 class="sidebar-title">Links</h5>
        <ul class="side-nav">
            <li><a href="http://blog.csdn.net/u010850265">CSDN</a></li>
        </ul>
		
        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="http://blog.csdn.net/u010850265">CSDN</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
              <!--                  <p>Small Cpp | 勿在浮沙筑高台, 练从难处练, 用从易处用. by martin</p> -->
            </div>
            </div>
    </div>
</footer>
</body>
</html>