<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>01. 遊戲開發數學基礎(坐标系、向量、矩阵)</title>

    <link rel="stylesheet" href="http://blog.smallcpp.com/theme/css/normalize.css" />
    <link rel="stylesheet" href="http://blog.smallcpp.com/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="http://blog.smallcpp.com/theme/css/style.css" />
    <link rel="stylesheet" href="http://blog.smallcpp.com/theme/css/pygments.css" />
    <link rel="shortcut icon" type="image/x-icon" href="http://blog.smallcpp.com/theme/images/favicon.ico" />
    <script src="http://blog.smallcpp.com/theme/js/modernizr.js"></script>
</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="http://blog.smallcpp.com">Small Cpp | 勿在浮沙筑高台, 练从难处练, 用从易处用.</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
<article>
    <header>
        <h3 class="article-title"><a href="http://blog.smallcpp.com/01-you-xi-kai-fa-shu-xue-ji-chu-zuo-biao-xi-xiang-liang-ju-zhen.html" rel="bookmark"
        title="Permalink to 01. 遊戲開發數學基礎(坐标系、向量、矩阵)">01. 遊戲開發數學基礎(坐标系、向量、矩阵)</a></h3>
    </header>

<h6 class="subheader" title="2015-06-15T17:08:00+08:00">Mon 15 June 2015
</h6>


    <p><strong>笛卡爾坐標系</strong></p>
<p>笛卡爾坐標系有 1D、2D、3D 三種, 因為我們要學的 cocos2d-x 是基於 2D 的, 因此, 我們主要討論 2D 笛卡爾坐標系.</p>
<p>2D 笛卡爾坐標系 就是我們中學學過的 x/y 坐標系, 當然也稍有不同.</p>
<p>首先, 在 2D 笛卡爾坐標系 中, 根據 x/y 的方向不同有 8 種不同的坐標系方案.
<img alt="" src="http://i58.tinypic.com/2rppn5e.jpg"></p>
<p>在 cocos2d-x 中, 我們使用的是最早中學接觸過的那種:
<img alt="" src="http://i58.tinypic.com/2upeek7.jpg">
坐標系的原點對應屏幕左下角.</p>
<hr>
<p>多坐標系</p>
<p>簡單的理解就是, 我們以屏幕左下角的坐標系為世界坐標系, 然後, 在我們的”世界”中, 可能會存在某個物體, 例如一個人(2D 平面), 那麼以人的左下角為原點又會形成一個坐標系, 我們稱它為物體坐標系, 那麼人的眼睛針對物體坐標系就會有一個物體坐標, 針對世界坐標系又會有一個世界坐標.
<img alt="" src="http://i58.tinypic.com/2ldzjv8.jpg">
如此圖, 我們把中間的紅框想像成人, 紅點想像成眼睛, 人的世界坐標是(3, 3), 眼睛的物體坐標是(1, 1), 當然, 世界坐標坐標系與物體坐標是可以互轉的.</p>
<hr>
<p><strong>向量</strong></p>
<p>向量是指一個同時具有大小和方向的幾何對象;</p>
<p>向量和坐標系一樣, 也有很多維度, 這裡主要學習 2D 向量.</p>
<p>向量和點的表示方法相同(x, y), 但是表達的意義相差千里, 點表示位置, 而向量表示的是<strong>位移</strong>.
如向量 [3, 4], 它表示的就是沿這個方向移動 5 個位置(勾股定律).
<img alt="" src="http://i58.tinypic.com/n2k2mo.jpg"></p>
<p><strong>向量的長度(又叫大小、模)的計算</strong>
<img alt="" src="http://i60.tinypic.com/2l54ar.jpg">
如上一個例子, 向量 [3, 4], 它的模套用此公式就是 [(3 的平方 + 4 的平方) 再開方], 結果就是 5, 當然, 如果只是 2D 向量的話, 就是簡單的勾股定律.</p>
<p>有一種特殊的向量叫<strong>單位向量</strong>(又叫標準化向量), 單位向量指模為 1 的向量, 這種向量表示我們只關心它的方向, 而不關心它的大小.
我們可以通過公式, 把一個向量轉換成標準化向量.
<img alt="" src="http://i58.tinypic.com/2gxpnyq.jpg">
例如, 把 [12, -5] 標準化:
<img alt="" src="http://i60.tinypic.com/b54s4i.jpg">
這裡用到了向量的除法, 簡單說明下, <strong>向量與標量的乘除就是把向量的每個元素分別與標量進行乘除</strong>.</p>
<p><strong>向量與向量的加減法
</strong><img alt="" src="http://i62.tinypic.com/1zyvh1s.jpg">
需要注意的是結果向量的方向:
<img alt="" src="http://i61.tinypic.com/16baiqw.jpg">
<img alt="" src="http://i60.tinypic.com/1zv66h1.jpg"></p>
<p><strong>向量的乘法
</strong>向量很怪異, 它分為點乘(a·b)和叉乘(axb).</p>
<p>先看<strong>點乘</strong>, 向量間的點乘結果是一個標量, 公式如下:
<img alt="" src="http://i60.tinypic.com/15ftcfm.jpg"></p>
<p>另外還有個公式:
<img alt="" src="http://i58.tinypic.com/2ivcqhu.jpg">
這兩個公式一結合, 我們就有了一個點乘的重要應用 -- 求兩向量夾角.
<img alt="" src="http://i58.tinypic.com/5fhevq.jpg"></p>
<p>在某些情況下, 我們可能只需要判斷下這個夾角的範圍, 而不需要具體角度, 這裡可以通過點乘的正負來快速判斷.
<img alt="" src="http://i57.tinypic.com/2lsdt7k.jpg"></p>
<p>再來看一上向量的叉乘, 它的公式很複雜:
<img alt="" src="http://i62.tinypic.com/2dvpq9h.jpg">
可以看到, 結果是另外一個向量;
它的是幾何意義是, 結果向量與相乘兩向量構成的平面垂直.
<img alt="" src="http://i61.tinypic.com/sy5mc8.jpg">
這已經涉及到 3D 數學的知識, 暫不討論.</p>
<hr>
<p><strong>矩阵</strong></p>
<p>向量可以说是標量的数组, 而矩阵则是向量的数组.</p>
<p>矩阵可以有很多行很多列, 这里接触一下 3*3 方阵(行數 == 列數)就可以了.
<img alt="" src="http://i59.tinypic.com/15xvpud.jpg"></p>
<p><strong>單位矩陣</strong>, 對角線上的元素為 1, 其實為 0.
<img alt="" src="http://i61.tinypic.com/359ejh2.jpg"></p>
<p><strong>轉置</strong>(行列互換)
<img alt="" src="http://i57.tinypic.com/35d2t0p.jpg">(D 表示單位矩陣, D 的轉置還是 D)</p>
<p>標量與矩陣的乘法也是拿標量與矩陣的每個元素相乘.</p>
<p><strong>矩陣間的乘法</strong>就比較複雜的了:
首先, 兩個矩陣要滿足一定的條件才能相乘, 即第一個矩陣的列數 等於 第二個矩陣的行數才能相乘.
<img alt="" src="http://i58.tinypic.com/ob0b4m.jpg">
可以看到, 結果矩陣的行數是第一個矩陣的行數, 列數是第二個矩陣的列數.
接下來, 看一下具體的乘法規則:
<img alt="" src="http://i62.tinypic.com/2rm3vhs.jpg"></p>
<p>c24 = a21<em>b14 + a22</em>b24 (點乘)</p>
<p>矩陣的乘法有一些規則, 可以了解下:
<img alt="" src="http://i59.tinypic.com/2agjkle.jpg"></p>
<p><strong>向量與方陣的乘法</strong>:
<img alt="" src="http://i61.tinypic.com/29as7rt.jpg">
這其實也是一種特殊的矩陣間相乘, 首先, 向量是一行三列的, 矩陣是三行三列的, 向量列數==矩陣的行數, 因此, 它們可以相乘, 結果是一個新向量.
列向量也是可以與方陣相乘的, 但是它就必須在矩陣的右邊:
<img alt="" src="http://i61.tinypic.com/54evyx.jpg"></p>
<p>講了這麼多矩陣, 其實在 2D 遊戲中, 我們用到最多的就是行向量與方陣相乘, 它被用來<strong>進行向量的變換</strong>.</p>
<p>矩陣的幾何解釋:
<img alt="" src="http://i60.tinypic.com/4zw5mf.jpg">
如圖, 一開始 p[1, 0], 經過方陣的轉換, 結果為 [1<em>2+0</em>(-1), 1<em>1+0</em>2] = [2, 1], q 同理.
如果, 我們把 p、q 向量看成一個平面, 那麼這其實完成的是平面的變換:
<img alt="" src="http://i57.tinypic.com/2ljlyf9.jpg"></p>
<p><strong>那麼問題來了, 現在已經知道, 已經一個旋轉矩陣就能對向量進行旋轉, 那麼假如想把一個向量順時針旋轉30度, 該怎麼得到這個旋轉矩陣呢?</strong>
根據三角函數, 可以得到下圖:
<img alt="" src="http://i59.tinypic.com/soqrde.jpg">
<img alt="" src="http://i57.tinypic.com/k4h6xu.jpg"></p>
<p>當然, 關於數學知識不止這麼多, 等我以後用到了, 再添加進來(例如矩陣就還有縮放、投影、鏡像等).
ss?</p>
<p class="subheader">Category: <a href="http://blog.smallcpp.com/category/cocos2d.html">Cocos2d</a>

</p>




<!--      -->

    <!-- 多说评论框 start -->
    <h4>Comments !</h4>
    <div class="ds-thread" data-thread-key="01-you-xi-kai-fa-shu-xue-ji-chu-zuo-biao-xi-xiang-liang-ju-zhen" data-title="01. 遊戲開發數學基礎(坐标系、向量、矩阵)" data-url="http://blog.smallcpp.com/01-you-xi-kai-fa-shu-xue-ji-chu-zuo-biao-xi-xiang-liang-ju-zhen.html"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"smallcpp"};
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';ds.async = true;
                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
    </script>
    <!-- 多说公共JS代码 end -->
</article>
    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="http://blog.smallcpp.com/archives.html">Archives</a>
            <li><a href="http://blog.smallcpp.com/tags.html">Tags</a>
        </ul>

        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="http://blog.smallcpp.com/category/c11.html">C++11</a></li>
            <li><a href="http://blog.smallcpp.com/category/cocos2d.html">Cocos2d</a></li>
            <li><a href="http://blog.smallcpp.com/category/da-hua-she-ji-mo-shi.html">大话设计模式</a></li>
            <li><a href="http://blog.smallcpp.com/category/da-shu-ju.html">大数据</a></li>
            <li><a href="http://blog.smallcpp.com/category/da-shu-ju-java-ji-chu.html">大数据 Java 基础</a></li>
            <li><a href="http://blog.smallcpp.com/category/da-shu-ju-linux-ji-chu.html">大数据 Linux 基础</a></li>
            <li><a href="http://blog.smallcpp.com/category/da-shu-ju-mongodb-ji-chu.html">大数据 Mongodb 基础</a></li>
            <li><a href="http://blog.smallcpp.com/category/da-shu-ju-redis-ji-chu.html">大数据 Redis 基础</a></li>
            <li><a href="http://blog.smallcpp.com/category/du-shu-bi-ji.html">读书笔记</a></li>
            <li><a href="http://blog.smallcpp.com/category/golang.html">Golang</a></li>
            <li><a href="http://blog.smallcpp.com/category/hei-ke-ji.html">黑科技</a></li>
            <li><a href="http://blog.smallcpp.com/category/java.html">JAVA</a></li>
            <li><a href="http://blog.smallcpp.com/category/lua.html">Lua</a></li>
            <li><a href="http://blog.smallcpp.com/category/pyqt.html">PyQt</a></li>
            <li><a href="http://blog.smallcpp.com/category/python.html">Python</a></li>
            <li><a href="http://blog.smallcpp.com/category/qt.html">QT</a></li>
            <li><a href="http://blog.smallcpp.com/category/ruan-jian-she-ji.html">软件设计</a></li>
            <li><a href="http://blog.smallcpp.com/category/za-xiang.html">杂项</a></li>
        </ul>

        <h5 class="sidebar-title">Links</h5>
        <ul class="side-nav">
            <li><a href="http://blog.csdn.net/u010850265">CSDN</a></li>
        </ul>

        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="http://blog.csdn.net/u010850265">CSDN</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
              <!--                  <p>Small Cpp | 勿在浮沙筑高台, 练从难处练, 用从易处用. by martin</p> -->
            </div>
            </div>
    </div>
</footer>
</body>
</html>