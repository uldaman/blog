Title: 009、逻辑运算符、移位及权限模型
Author: Martin
Date: 2016-02-26 23:59
Summary: && 与 &, || 与 | 的区别, 以及一个简单的权限验证模型.

1. 运算符
逻辑运算符
与（&&）、非（!）、或（||）

位运算符
与（&）、非（~）、或（|）、异或（^）

也没什么, 主要是搞清楚 && 与 & 和 || 与 | 的区别

拿 && 与 & 举例
有一种说法 & 是与, 而 && 是短路与(即第一个是 false 则不计算第二个表达式, 直接返回 false), & 是要两边的表达式都要计算.

从以前学习 C++ 的知识来看, 我认为 && 是逻辑运算, 而 & 是按位运算(算术运算), 两者是有本质上的区别, 之所以 & 要两个表达式都运算次, 是因为它要拿两边表达式的结果按位与.

2. 移位操作
<< -- 左移.

>> -- 右移, 高位用符号位的二进制填充.

>>> -- 无符号右移, 高位用 0 填充.

对正数而言, 左移 n 位就是乘以 2^n, 右移 n 位就是除以 2^n.
而对于负数, 因为负数的表示形式是补码, 它左移/右移就不是简单的乘/除 2^n 了.

3. 权限模型

如图所示, 我们假设这是四个通道, 要想通过通道, 就要拥有对应通道的权限.

那么我们用二进制的 0 和 1 来控制权限, 0 表示没有权限, 1 表示有权限.
第一个通道的权限就是 1 0 0 0, 第二个通道的权限就是 0 1 0 0, 第三个通道的权限就是 0 0 1 0, 第四个通道的权限就是 0 0 0 1.

好, 现在通道的权限设置好了, 用户的权限也是用四个二进制来表示, 用户想要通过第一个通道, 那他的第一位二进制就要为 1, 其他位不重要, 如果用户想要通过第一、二位通道, 那他的第一位和第二位二进制就都要为 1, 以此类推.

当验证时, 拿用户的二进制权限数据和通道对应的二进制权限数据进行 & 运算, 得到的结果如果不为 0, 则表示用户拥有通过这个通道的权限, 如果为 0, 则没有对应的权限.

如用户正在通过第一个通道, 其拥有的权限是 1 0 0 0.



很明显, 他验证通过.

如果其拥有的权限是 0 1 0 0.



很遗憾, 验证结果为 0, 他没有权限.
