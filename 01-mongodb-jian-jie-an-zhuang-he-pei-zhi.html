<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>01、Mongodb 简介、安装和配置</title>

    <link rel="stylesheet" href="http://blog.smallcpp.com/theme/css/normalize.css" />
    <link rel="stylesheet" href="http://blog.smallcpp.com/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="http://blog.smallcpp.com/theme/css/style.css" />
    <link rel="stylesheet" href="http://blog.smallcpp.com/theme/css/pygments.css" />	
    <script src="http://blog.smallcpp.com/theme/js/modernizr.js"></script>
</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="http://blog.smallcpp.com">Small Cpp | 勿在浮沙筑高台, 练从难处练, 用从易处用.</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
<article>
    <header>
        <h3 class="article-title"><a href="http://blog.smallcpp.com/01-mongodb-jian-jie-an-zhuang-he-pei-zhi.html" rel="bookmark"
        title="Permalink to 01、Mongodb 简介、安装和配置">01、Mongodb 简介、安装和配置</a></h3>
    </header>

<h6 class="subheader" title="2016-04-08T10:29:00+08:00">周五 08 四月 2016
</h6>


    <div class="toc">
<ul>
<li><a href="#_1">简介</a></li>
<li><a href="#_2">下载</a></li>
<li><a href="#_3">创建数据目录</a></li>
<li><a href="#cmd-mongodb">以 CMD 进程运行 MongoDB 服务器</a></li>
<li><a href="#windows-mongodb">以 Windows 服务运行 MongoDB 服务器</a></li>
<li><a href="#mongodb-client">MongoDB 自带的 Client</a></li>
<li><a href="#_4">关闭服务</a></li>
</ul>
</div>
<h2 id="_1">简介</h2>
<p>Mongodb 是一款 NoSQL(Not Only Sql 非关系型数据库), 由 C++ 语言编写而成, 现在网上说 Mongodb 这里不行那里不行的人挺多, 包括性能什么的, 特别是大访问量的时候&hellip;</p>
<p>其实 Mongodb 是也是支持大访问量的, 性能也还不错, 很多大型网站也都是使用 Mongodb 做数据库, 但是首先, 你得遵照它的设计原则, 如果不尊重它的原则和要求, 它就会&rdquo;惩罚&rdquo;你&hellip;</p>
<p>MongoDB 是面向__文档__存储的数据库, 它将传统意义上的数据库视为一个__文档__, 数据结构由__键值对__(key=>value)对组成.</p>
<h2 id="_2">下载</h2>
<p>直接去官网下载即可.</p>
<p>另外, 对于 Windows 下, 有一个__桌面化管理工具__: <a href="https://yunpan.cn/cqXnDqkxqwSCX">Robomongo 64位</a>, 访问密码 <strong>378c</strong>, 也可下载配合使用.</p>
<p><strong>mongo 命令不区分大小写.</strong></p>
<h2 id="_3">创建数据目录</h2>
<p>安装好后, Mongodb 需要手动创建一个根目录用来存放数据, 请注意, 数据目录应该放在根目录下(如 C:\ 或者 D:\ 等).<br>
如在 C: 盘 下创建一个 Data 目录做为 Mongodb 的数据目录.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">D:\

mkdir Data
</pre></div>


<p><br></p>
<h2 id="cmd-mongodb">以 CMD 进程运行 MongoDB 服务器</h2>
<p>为了从命令提示符下运行 MongoDB 服务器, 需要在 MongoDB 目录的 <strong>bin</strong> 目录中执行 <strong>mongod.exe</strong> 文件.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">mongod --dbpath D:\Data
</pre></div>


<p><br></p>
<p>如果执行成功, 可能会输出类似如下信息:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">I CONTROL  [main] Hotfix KB2731284 or later update is not installed, will zero-out data files
I CONTROL  [initandlisten] MongoDB starting : pid=10916 port=27017 dbpath=D:\Data 64-bit host=SH61041PCW
I CONTROL  [initandlisten] targetMinOS: Windows Vista/Windows Server 2008
I CONTROL  [initandlisten] db version v3.2.4
I CONTROL  [initandlisten] git version: e2ee9ffcf9f5a94fad76802e28cc978718bb7a30
I CONTROL  [initandlisten] allocator: tcmalloc
I CONTROL  [initandlisten] modules: none
I CONTROL  [initandlisten] build environment:
I CONTROL  [initandlisten]     distarch: x86_64
I CONTROL  [initandlisten]     target_arch: x86_64
I CONTROL  [initandlisten] options: { storage: { dbPath: &quot;D:\Data&quot; } }
I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=4G,session_max=20000,eviction=(threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),
I NETWORK  [HostnameCanonicalizationWorker] Starting hostname canonicalization worker
I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory &#39;D:/Data/diagnostic.data&#39;
I NETWORK  [initandlisten] waiting for connections on port 27017
……
</pre></div>


<p><br></p>
<h2 id="windows-mongodb">以 Windows 服务运行 MongoDB 服务器</h2>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">mongod --bind_ip [your id adress] --logpath [D:\Data\mongodb.log] --logappend --dbpath [D:\Data] --port [your port number] --serviceName [your service name] --serviceDisplayName [your service name] --install
</pre></div>


<p><br></p>
<p>下表为 mongodb 启动的参数说明:</p>
<ul>
<li><strong>bind_ip</strong>               绑定服务 IP, 若绑定 127.0.0.1, 则只能本机访问, __默认__所有 IP</li>
<li><strong>logpath</strong>               指定 MongoDB 日志文件, 注意是指定文件不是目录</li>
<li><strong>logappend</strong>             使用追加的方式写日志</li>
<li><strong>dbpath</strong>                指定数据库路径</li>
<li><strong>port</strong>                  指定服务端口号, __默认__端口 27017</li>
<li><strong>serviceName</strong>           指定服务名称</li>
<li><strong>serviceDisplayName</strong>    指定服务名称, 有多个 mongodb 服务时执行</li>
<li><strong>install</strong>               指定作为一个 Windows 服务安装</li>
</ul>
<h2 id="mongodb-client">MongoDB 自带的 Client</h2>
<p>MongoDB 自带的 Client 是交互式的 Shell, 用来对 MongoDB 进行操作和管理, 执行 MongoDB 根目录下 <strong>bin</strong> 目录中的 <strong>mongo.exe</strong> 文件就能打开这个交互环境.</p>
<p>当进入 MongoDB Client 后, 它默认会链接到 <strong>test</strong> 文档(<strong>MongoDB 的文档就是常规理解中的数据库</strong>)</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">&gt; mongo
MongoDB shell version: 3.0.6
connecting to: test
……
</pre></div>


<p><br>
<strong>db</strong> 命令用于查看当前操作的文档(数据库):</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">&gt; db
test
&gt;
</pre></div>


<p><br>
<strong>db.serverCmdLineOpts()</strong> 方法用来查看连接的 Mongodb 的信息:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">db.serverCmdLineOpts()
{
        <span style="color: #BB4444">&quot;argv&quot;</span> <span style="color: #666666">:</span> [
                <span style="color: #BB4444">&quot;mongod&quot;</span>,
                <span style="color: #BB4444">&quot;--dbpath&quot;</span>,
                <span style="color: #BB4444">&quot;D:\\Data&quot;</span>
        ],
        <span style="color: #BB4444">&quot;parsed&quot;</span> <span style="color: #666666">:</span> {
                <span style="color: #BB4444">&quot;storage&quot;</span> <span style="color: #666666">:</span> {
                        <span style="color: #BB4444">&quot;dbPath&quot;</span> <span style="color: #666666">:</span> <span style="color: #BB4444">&quot;D:\\Data&quot;</span>
                }
        },
        <span style="color: #BB4444">&quot;ok&quot;</span> <span style="color: #666666">:</span> <span style="color: #666666">1</span>
}
</pre></div>


<p><br>
MongoDB Client 中还可以运行一些简单的算术运算:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">&gt; 2 + 2
4
&gt;
</pre></div>


<h2 id="_4">关闭服务</h2>
<p>可以用以下三种方法来关闭已启动的 Mongodb 服务器:</p>
<ul>
<li>最暴力, 直接 kill mongodb process</li>
<li>打开个 CMD, mogod --shutdown --dbpath</li>
<li>用 Client 连上服务器, 然后切换到 admin 数据库, 使用 db.shutdownServer()<ul>
<li>use admin</li>
<li>db.shutdownServer()</li>
</ul>
</li>
</ul>
<p class="subheader">Category: <a href="http://blog.smallcpp.com/category/shen-ru-qian-chu-mongodb.html">深入浅出 Mongodb</a>

</p>




</article>
    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="http://blog.smallcpp.com/archives.html">Archives</a>
            <li><a href="http://blog.smallcpp.com/tags.html">Tags</a>
        </ul>

		
        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="http://blog.smallcpp.com/category/ban-ben-kong-zhi.html">版本控制</a></li>
            <li><a href="http://blog.smallcpp.com/category/c11xin-te-xing.html">C++11新特性</a></li>
            <li><a href="http://blog.smallcpp.com/category/cocos2dyou-xi-kai-fa.html">Cocos2d游戏开发</a></li>
            <li><a href="http://blog.smallcpp.com/category/da-hua-she-ji-mo-shi.html">大话设计模式</a></li>
            <li><a href="http://blog.smallcpp.com/category/da-shu-ju.html">大数据</a></li>
            <li><a href="http://blog.smallcpp.com/category/dai-ma-da-quan.html">代碼大全</a></li>
            <li><a href="http://blog.smallcpp.com/category/golang.html">Golang</a></li>
            <li><a href="http://blog.smallcpp.com/category/hadoop.html">hadoop</a></li>
            <li><a href="http://blog.smallcpp.com/category/hei-ke-ji.html">黑科技</a></li>
            <li><a href="http://blog.smallcpp.com/category/jia-che-bao-dian.html">驾车宝典</a></li>
            <li><a href="http://blog.smallcpp.com/category/jia-gou-shi-zhi-lu.html">架构师之路</a></li>
            <li><a href="http://blog.smallcpp.com/category/ling-ji-chu-qt-ru-men.html">零基础 QT 入门</a></li>
            <li><a href="http://blog.smallcpp.com/category/linux.html">Linux</a></li>
            <li><a href="http://blog.smallcpp.com/category/luayou-xi-kai-fa.html">Lua游戏开发</a></li>
            <li><a href="http://blog.smallcpp.com/category/pyqt-kai-fa.html">PyQt 开发</a></li>
            <li><a href="http://blog.smallcpp.com/category/python-cong-ru-men-dao-fang-qi.html">Python 从入门到放弃</a></li>
            <li><a href="http://blog.smallcpp.com/category/shen-ru-qian-chu-flask.html">深入浅出 Flask</a></li>
            <li><a href="http://blog.smallcpp.com/category/shen-ru-qian-chu-mongodb.html">深入浅出 Mongodb</a></li>
            <li><a href="http://blog.smallcpp.com/category/shen-ru-qian-chu-redis.html">深入浅出 Redis</a></li>
            <li><a href="http://blog.smallcpp.com/category/za-xiang.html">杂项</a></li>
            <li><a href="http://blog.smallcpp.com/category/zai-xue-java.html">再学 JAVA</a></li>
   
        </ul>

        <h5 class="sidebar-title">Links</h5>
        <ul class="side-nav">
            <li><a href="http://blog.csdn.net/u010850265">CSDN</a></li>
        </ul>
		
        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="http://blog.csdn.net/u010850265">CSDN</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
              <!--                  <p>Small Cpp | 勿在浮沙筑高台, 练从难处练, 用从易处用. by martin</p> -->
            </div>
            </div>
    </div>
</footer>
</body>
</html>