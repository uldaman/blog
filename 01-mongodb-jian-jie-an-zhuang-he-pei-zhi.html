<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <!-- Site Meta Data -->
  <title>01、Mongodb 简介、安装和配置</title>
  <meta name="description" content="">
  <meta name="author" content="martin">

  <!-- Style Meta Data -->
  <link rel="stylesheet" href="http://blog.smallcpp.cn/theme/css/notebook.css" type="text/css" />
  <link rel="shortcut icon" href="http://blog.smallcpp.cn/theme/images/avatar.png">

  <!-- Feed Meta Data -->
  <link href="http://blog.smallcpp.cn/" type="application/atom+xml" rel="alternate" title="Small Cpp ATOM Feed" />

  <!-- Twitter Feed -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:image" content="http://blog.smallcpp.cn/theme/images/avatar.png">

<meta name="twitter:creator" content="">
<meta name="twitter:url" content="http://blog.smallcpp.cn/01-mongodb-jian-jie-an-zhuang-he-pei-zhi.html">
<meta name="twitter:title" content="Small Cpp ~ 01、Mongodb 简介、安装和配置">
<meta name="twitter:description" content="Mongodb 是一款 NoSQL(Not Only Sql 非关系型数据库), 虽然现在有人说它性能不好, 其实只要遵循它的设计原则和要求, 也能实现出高性能的数据库.">

<!-- Facebook Meta Data -->
<meta property="og:title" content="Small Cpp ~ 01、Mongodb 简介、安装和配置" />
<meta property="og:description" content="Mongodb 是一款 NoSQL(Not Only Sql 非关系型数据库), 虽然现在有人说它性能不好, 其实只要遵循它的设计原则和要求, 也能实现出高性能的数据库." />
<meta property="og:image" content="theme/images/avatar.png" />
</head>

<body>
  <!-- Sidebar -->
  <aside>
    <p><a href="http://blog.smallcpp.cn"><img id="avatar" src="http://blog.smallcpp.cn/theme/images/avatar.png"></a></p>
    <h1>Small Cpp</h1>
    <p>勿在浮沙筑高台, 练从难处练, 用从易处用.</p>
    <hr>
    <h2>Social</h2>
    <ul class="social">
      <a href="http://blog.csdn.net/u010850265">CSDN</a></li>
    </ul>
    <h2>Categories</h2>
    <ul class="navbar">
      <li><a href="http://blog.smallcpp.cn/category/c11.html">C++11</a></li>
      <li><a href="http://blog.smallcpp.cn/category/da-shu-ju.html">大数据</a></li>
      <li><a href="http://blog.smallcpp.cn/category/du-shu-bi-ji.html">读书笔记</a></li>
      <li><a href="http://blog.smallcpp.cn/category/golang.html">Golang</a></li>
      <li><a href="http://blog.smallcpp.cn/category/hei-ke-ji.html">黑科技</a></li>
      <li><a href="http://blog.smallcpp.cn/category/java.html">Java</a></li>
      <li><a href="http://blog.smallcpp.cn/category/linux.html">Linux</a></li>
      <li><a href="http://blog.smallcpp.cn/category/lua.html">Lua</a></li>
      <li class="active"><a href="http://blog.smallcpp.cn/category/mongodb.html">Mongodb</a></li>
      <li><a href="http://blog.smallcpp.cn/category/pyqt.html">PyQt</a></li>
      <li><a href="http://blog.smallcpp.cn/category/python.html">Python</a></li>
      <li><a href="http://blog.smallcpp.cn/category/qt.html">QT</a></li>
      <li><a href="http://blog.smallcpp.cn/category/qu-kuai-lian.html">区块链</a></li>
      <li><a href="http://blog.smallcpp.cn/category/redis.html">Redis</a></li>
      <li><a href="http://blog.smallcpp.cn/category/ruan-jian-she-ji.html">软件设计</a></li>
      <li><a href="http://blog.smallcpp.cn/category/za-xiang.html">杂项</a></li>
    </ul> 
  </aside>

  <!-- Content -->
  <article>
<section id="content">
    <article>
        <header class="post_list">
            <h2 class="post_title"><a href="http://blog.smallcpp.cn/01-mongodb-jian-jie-an-zhuang-he-pei-zhi.html" rel="bookmark" title="Permalink to 01、Mongodb 简介、安装和配置">01、Mongodb 简介、安装和配置</a></h2>
            <span>Par </span>
            <a href="http://blog.smallcpp.cn/author/martin.html">@Martin</a>
            <span> dans </span>
            <span class="post_category"><a href="http://blog.smallcpp.cn/category/mongodb.html" rel="bookmark" title="Permalink to Mongodb">[ Mongodb ]</a></span>
            <span> le </span>
            <span class="post_date">Fri 08 April 2016</span>
            <div></div>
            <div><span>Tags : </span>
            </div>
        </header>
        <div class="entry-content">
            <div class="toc">
<ul>
<li><a href="#_1">简介</a></li>
<li><a href="#_2">下载</a></li>
<li><a href="#_3">创建数据目录</a></li>
<li><a href="#cmd-mongodb">以 CMD 进程运行 MongoDB 服务器</a></li>
<li><a href="#windows-mongodb">以 Windows 服务运行 MongoDB 服务器</a></li>
<li><a href="#mongodb-client">MongoDB 自带的 Client</a></li>
<li><a href="#_4">关闭服务</a></li>
</ul>
</div>
<h2 id="_1">简介</h2>
<p>Mongodb 是一款 NoSQL(Not Only Sql 非关系型数据库), 由 C++ 语言编写而成, 现在网上说 Mongodb 这里不行那里不行的人挺多, 包括性能什么的, 特别是大访问量的时候&hellip;</p>
<p>其实 Mongodb 是也是支持大访问量的, 性能也还不错, 很多大型网站也都是使用 Mongodb 做数据库, 但是首先, 你得遵照它的设计原则, 如果不尊重它的原则和要求, 它就会&rdquo;惩罚&rdquo;你&hellip;</p>
<p>MongoDB 是面向__文档__存储的数据库, 它将传统意义上的数据库视为一个__文档__, 数据结构由__键值对__(key=>value)对组成.</p>
<h2 id="_2">下载</h2>
<p>直接去官网下载即可.</p>
<p>另外, 对于 Windows 下, 有一个__桌面化管理工具__: <a href="https://yunpan.cn/cqXnDqkxqwSCX">Robomongo 64位</a>, 访问密码 <strong>378c</strong>, 也可下载配合使用.</p>
<p><strong>mongo 命令不区分大小写.</strong></p>
<h2 id="_3">创建数据目录</h2>
<p>安装好后, Mongodb 需要手动创建一个根目录用来存放数据, 请注意, 数据目录应该放在根目录下(如 C:\ 或者 D:\ 等).<br>
如在 C: 盘 下创建一个 Data 目录做为 Mongodb 的数据目录.</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>D:\

mkdir Data
</pre></div>


<p><br></p>
<h2 id="cmd-mongodb">以 CMD 进程运行 MongoDB 服务器</h2>
<p>为了从命令提示符下运行 MongoDB 服务器, 需要在 MongoDB 目录的 <strong>bin</strong> 目录中执行 <strong>mongod.exe</strong> 文件.</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>mongod --dbpath D:\Data
</pre></div>


<p><br></p>
<p>如果执行成功, 可能会输出类似如下信息:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>I CONTROL  [main] Hotfix KB2731284 or later update is not installed, will zero-out data files
I CONTROL  [initandlisten] MongoDB starting : pid=10916 port=27017 dbpath=D:\Data 64-bit host=SH61041PCW
I CONTROL  [initandlisten] targetMinOS: Windows Vista/Windows Server 2008
I CONTROL  [initandlisten] db version v3.2.4
I CONTROL  [initandlisten] git version: e2ee9ffcf9f5a94fad76802e28cc978718bb7a30
I CONTROL  [initandlisten] allocator: tcmalloc
I CONTROL  [initandlisten] modules: none
I CONTROL  [initandlisten] build environment:
I CONTROL  [initandlisten]     distarch: x86_64
I CONTROL  [initandlisten]     target_arch: x86_64
I CONTROL  [initandlisten] options: { storage: { dbPath: &quot;D:\Data&quot; } }
I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=4G,session_max=20000,eviction=(threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),
I NETWORK  [HostnameCanonicalizationWorker] Starting hostname canonicalization worker
I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory &#39;D:/Data/diagnostic.data&#39;
I NETWORK  [initandlisten] waiting for connections on port 27017
……
</pre></div>


<p><br></p>
<h2 id="windows-mongodb">以 Windows 服务运行 MongoDB 服务器</h2>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>mongod --bind_ip [your id adress] --logpath [D:\Data\mongodb.log] --logappend --dbpath [D:\Data] --port [your port number] --serviceName [your service name] --serviceDisplayName [your service name] --install
</pre></div>


<p><br></p>
<p>下表为 mongodb 启动的参数说明:</p>
<ul>
<li><strong>bind_ip</strong>               绑定服务 IP, 若绑定 127.0.0.1, 则只能本机访问, __默认__所有 IP</li>
<li><strong>logpath</strong>               指定 MongoDB 日志文件, 注意是指定文件不是目录</li>
<li><strong>logappend</strong>             使用追加的方式写日志</li>
<li><strong>dbpath</strong>                指定数据库路径</li>
<li><strong>port</strong>                  指定服务端口号, __默认__端口 27017</li>
<li><strong>serviceName</strong>           指定服务名称</li>
<li><strong>serviceDisplayName</strong>    指定服务名称, 有多个 mongodb 服务时执行</li>
<li><strong>install</strong>               指定作为一个 Windows 服务安装</li>
</ul>
<h2 id="mongodb-client">MongoDB 自带的 Client</h2>
<p>MongoDB 自带的 Client 是交互式的 Shell, 用来对 MongoDB 进行操作和管理, 执行 MongoDB 根目录下 <strong>bin</strong> 目录中的 <strong>mongo.exe</strong> 文件就能打开这个交互环境.</p>
<p>当进入 MongoDB Client 后, 它默认会链接到 <strong>test</strong> 文档(<strong>MongoDB 的文档就是常规理解中的数据库</strong>)</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; mongo
MongoDB shell version: 3.0.6
connecting to: test
……
</pre></div>


<p><br>
<strong>db</strong> 命令用于查看当前操作的文档(数据库):</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; db
test
&gt;
</pre></div>


<p><br>
<strong>db.serverCmdLineOpts()</strong> 方法用来查看连接的 Mongodb 的信息:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.serverCmdLineOpts()
{
        <span style="color: #CD5555">&quot;argv&quot;</span> : [
                <span style="color: #CD5555">&quot;mongod&quot;</span>,
                <span style="color: #CD5555">&quot;--dbpath&quot;</span>,
                <span style="color: #CD5555">&quot;D:\\Data&quot;</span>
        ],
        <span style="color: #CD5555">&quot;parsed&quot;</span> : {
                <span style="color: #CD5555">&quot;storage&quot;</span> : {
                        <span style="color: #CD5555">&quot;dbPath&quot;</span> : <span style="color: #CD5555">&quot;D:\\Data&quot;</span>
                }
        },
        <span style="color: #CD5555">&quot;ok&quot;</span> : <span style="color: #B452CD">1</span>
}
</pre></div>


<p><br>
MongoDB Client 中还可以运行一些简单的算术运算:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; 2 + 2
4
&gt;
</pre></div>


<h2 id="_4">关闭服务</h2>
<p>可以用以下三种方法来关闭已启动的 Mongodb 服务器:</p>
<ul>
<li>最暴力, 直接 kill mongodb process</li>
<li>打开个 CMD, mogod --shutdown --dbpath xxx (好像新版的 mongodb 已经去除这个命令了)</li>
<li>用 Client 连上服务器, 然后切换到 admin 数据库, 使用 db.shutdownServer()<ul>
<li>use admin</li>
<li>db.shutdownServer()</li>
</ul>
</li>
</ul>
            <div align="center" style="color:#ccc;">☠</div>
        </div>
    </article>
</section>
  </article>


</body>
</html>