<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <!-- Site Meta Data -->
  <title>10、使用 pyqt 帮助文档</title>
  <meta name="description" content="">
  <meta name="author" content="martin">

  <!-- Style Meta Data -->
  <link rel="stylesheet" href="http://blog.smallcpp.cn/theme/css/notebook.css" type="text/css" />
  <link rel="shortcut icon" href="http://blog.smallcpp.cn/theme/images/avatar.png">

  <!-- Feed Meta Data -->
  <link href="http://blog.smallcpp.cn/" type="application/atom+xml" rel="alternate" title="Small Cpp ATOM Feed" />

  <!-- Twitter Feed -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:image" content="http://blog.smallcpp.cn/theme/images/avatar.png">

<meta name="twitter:creator" content="">
<meta name="twitter:url" content="http://blog.smallcpp.cn/10-shi-yong-pyqt-bang-zhu-wen-dang.html">
<meta name="twitter:title" content="Small Cpp ~ 10、使用 pyqt 帮助文档">
<meta name="twitter:description" content="官方文档永远是最好的学习资料…">

<!-- Facebook Meta Data -->
<meta property="og:title" content="Small Cpp ~ 10、使用 pyqt 帮助文档" />
<meta property="og:description" content="官方文档永远是最好的学习资料…" />
<meta property="og:image" content="theme/images/avatar.png" />
</head>

<body>
  <!-- Sidebar -->
  <aside>
    <p><a href="http://blog.smallcpp.cn"><img id="avatar" src="http://blog.smallcpp.cn/theme/images/avatar.png"></a></p>
    <h1>Small Cpp</h1>
    <p>勿在浮沙筑高台, 练从难处练, 用从易处用.</p>
    <hr>
    <h2>Social</h2>
    <ul class="social">
      <a href="http://blog.csdn.net/u010850265">CSDN</a></li>
    </ul>
    <h2>Categories</h2>
    <ul class="navbar">
      <li><a href="http://blog.smallcpp.cn/category/c11.html">C++11</a></li>
      <li><a href="http://blog.smallcpp.cn/category/da-shu-ju.html">大数据</a></li>
      <li><a href="http://blog.smallcpp.cn/category/du-shu-bi-ji.html">读书笔记</a></li>
      <li><a href="http://blog.smallcpp.cn/category/golang.html">Golang</a></li>
      <li><a href="http://blog.smallcpp.cn/category/hei-ke-ji.html">黑科技</a></li>
      <li><a href="http://blog.smallcpp.cn/category/java.html">Java</a></li>
      <li><a href="http://blog.smallcpp.cn/category/linux.html">Linux</a></li>
      <li><a href="http://blog.smallcpp.cn/category/lua.html">Lua</a></li>
      <li><a href="http://blog.smallcpp.cn/category/mongodb.html">Mongodb</a></li>
      <li class="active"><a href="http://blog.smallcpp.cn/category/pyqt.html">PyQt</a></li>
      <li><a href="http://blog.smallcpp.cn/category/python.html">Python</a></li>
      <li><a href="http://blog.smallcpp.cn/category/qt.html">QT</a></li>
      <li><a href="http://blog.smallcpp.cn/category/qu-kuai-lian.html">区块链</a></li>
      <li><a href="http://blog.smallcpp.cn/category/redis.html">Redis</a></li>
      <li><a href="http://blog.smallcpp.cn/category/ruan-jian-she-ji.html">软件设计</a></li>
      <li><a href="http://blog.smallcpp.cn/category/za-xiang.html">杂项</a></li>
    </ul> 
  </aside>

  <!-- Content -->
  <article>
<section id="content">
    <article>
        <header class="post_list">
            <h2 class="post_title"><a href="http://blog.smallcpp.cn/10-shi-yong-pyqt-bang-zhu-wen-dang.html" rel="bookmark" title="Permalink to 10、使用 pyqt 帮助文档">10、使用 pyqt 帮助文档</a></h2>
            <span>Par </span>
            <a href="http://blog.smallcpp.cn/author/martin.html">@Martin</a>
            <span> dans </span>
            <span class="post_category"><a href="http://blog.smallcpp.cn/category/pyqt.html" rel="bookmark" title="Permalink to PyQt">[ PyQt ]</a></span>
            <span> le </span>
            <span class="post_date">Sun 15 May 2016</span>
            <div></div>
            <div><span>Tags : </span>
            </div>
        </header>
        <div class="entry-content">
            <p>官方文档永远是最好的学习资料, 学习 Pyqt 也不例外, 可惜的是默认的 <code>Qt Assistant</code> 中并没有包含 pyqt 的参考.</p>
<p>不过倒是有份在线版的.. <a href="http://pyqt.sourceforge.net/Docs/PyQt4/classes.html">http://pyqt.sourceforge.net/Docs/PyQt4/classes.html</a></p>
<p>在线版的使用起来总是不爽, 于是在网上找参考了一些文章, 终于在 Qt Assistant 上集成了 pyqt 参考.</p>
<p>首先, 安装 pyqt 后在 <code>\site-packages\PyQt4\doc\html</code> 目录下是有 html 格式的参考文档的, 只是 Qt Assistant 识别的是 <code>qch</code> 文件, 于是, 我们只要找办法把这些 html 文件生成 <code>qch</code> 文件, 再添加到 Qt Assistant 中就可以了.</p>
<p>参考资料:<br>
<a href="http://blog.chinaunix.net/uid-28194872-id-3672811.html">基于Qt Assistant制作软件帮助文档</a><br>
<a href="http://askandstudy.blog.163.com/blog/static/199752058201202823638708/">pyqt class reference添加到qt设计师的qt助手中</a><br>
<a href="http://www.cnblogs.com/Braveliu/p/5055387.html">利用Qt Assistant 定制帮助文档</a><br></p>
<p>我们在 <code>\site-packages\PyQt4\doc\html</code> 目录下新建个 <code>pyqtclassreference.qhp</code> 文件, 这个文件就把它理解成一个配置文件好了, 等下要根据这个配置文件生成 <code>qch</code> 文件, 在 <code>pyqtclassreference.qhp</code> 中写入以下内容 (这个文件我共享了一份: <a href="http://share.weiyun.com/f65c8c82d20c167f13880412d5fbe673">传送门</a>):</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #1e889b">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
 <span style="color: #8B008B; font-weight: bold">&lt;QtHelpProject</span> <span style="color: #658b00">version=</span><span style="color: #CD5555">&quot;1.0&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;</span>
     <span style="color: #8B008B; font-weight: bold">&lt;namespace&gt;</span>pyqt.doc<span style="color: #8B008B; font-weight: bold">&lt;/namespace&gt;</span>
     <span style="color: #8B008B; font-weight: bold">&lt;virtualFolder&gt;</span>doc<span style="color: #8B008B; font-weight: bold">&lt;/virtualFolder&gt;</span>
     <span style="color: #8B008B; font-weight: bold">&lt;filterSection&gt;</span>
         <span style="color: #8B008B; font-weight: bold">&lt;toc&gt;</span> <span style="color: #228B22">&lt;!-- 该标签指定了目录, 这些关键字会显示在 Qt Assistant 的目录页面 --&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;section</span> <span style="color: #658b00">title=</span><span style="color: #CD5555">&quot;qabstractanimation&quot;</span> <span style="color: #658b00">ref=</span><span style="color: #CD5555">&quot;qabstractanimation.html&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;&lt;/section&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;section</span> <span style="color: #658b00">title=</span><span style="color: #CD5555">&quot;qabstractbutton&quot;</span> <span style="color: #658b00">ref=</span><span style="color: #CD5555">&quot;qabstractbutton.html&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;&lt;/section&gt;</span>
            <span style="color: #228B22">&lt;!-- 省略了 N 多, 足有 500 个左右 --&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;section</span> <span style="color: #658b00">title=</span><span style="color: #CD5555">&quot;qxmlstreamreader&quot;</span> <span style="color: #658b00">ref=</span><span style="color: #CD5555">&quot;qxmlstreamreader.html&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;&lt;/section&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;section</span> <span style="color: #658b00">title=</span><span style="color: #CD5555">&quot;qxmlstreamwriter&quot;</span> <span style="color: #658b00">ref=</span><span style="color: #CD5555">&quot;qxmlstreamwriter.html&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;&lt;/section&gt;</span>
         <span style="color: #8B008B; font-weight: bold">&lt;/toc&gt;</span>
         <span style="color: #8B008B; font-weight: bold">&lt;keywords&gt;</span> <span style="color: #228B22">&lt;!-- 该标签指定了索引, 这些关键字会显示在 Qt Assistant 的索引页面 --&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;keyword</span> <span style="color: #658b00">name=</span><span style="color: #CD5555">&quot;qabstractanimation&quot;</span> <span style="color: #658b00">ref=</span><span style="color: #CD5555">&quot;qabstractanimation.html&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;&lt;/keyword&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;keyword</span> <span style="color: #658b00">name=</span><span style="color: #CD5555">&quot;qabstractbutton&quot;</span> <span style="color: #658b00">ref=</span><span style="color: #CD5555">&quot;qabstractbutton.html&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;&lt;/keyword&gt;</span>
            <span style="color: #228B22">&lt;!-- 省略了 N 多, 足有 500 个左右 --&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;keyword</span> <span style="color: #658b00">name=</span><span style="color: #CD5555">&quot;qxmlstreamreader&quot;</span> <span style="color: #658b00">ref=</span><span style="color: #CD5555">&quot;qxmlstreamreader.html&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;&lt;/keyword&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;keyword</span> <span style="color: #658b00">name=</span><span style="color: #CD5555">&quot;qxmlstreamwriter&quot;</span> <span style="color: #658b00">ref=</span><span style="color: #CD5555">&quot;qxmlstreamwriter.html&quot;</span><span style="color: #8B008B; font-weight: bold">&gt;&lt;/keyword&gt;</span>
         <span style="color: #8B008B; font-weight: bold">&lt;/keywords&gt;</span>
         <span style="color: #8B008B; font-weight: bold">&lt;files&gt;</span> <span style="color: #228B22">&lt;!-- 该标签指定了实际的文件 --&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;file&gt;</span>qabstractanimation.html<span style="color: #8B008B; font-weight: bold">&lt;/file&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;file&gt;</span>qabstractbutton.html<span style="color: #8B008B; font-weight: bold">&lt;/file&gt;</span>
            <span style="color: #228B22">&lt;!-- 省略了 N 多 --&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;file&gt;</span>images/alphafill.png<span style="color: #8B008B; font-weight: bold">&lt;/file&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;file&gt;</span>images/assistant-toolbar.png<span style="color: #8B008B; font-weight: bold">&lt;/file&gt;</span>
            <span style="color: #228B22">&lt;!-- 省略了 N 多 --&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;file&gt;</span>_static/ajax-loader.gif<span style="color: #8B008B; font-weight: bold">&lt;/file&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;file&gt;</span>_static/basic.css<span style="color: #8B008B; font-weight: bold">&lt;/file&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;file&gt;</span>_sources/buffer_interface.txt<span style="color: #8B008B; font-weight: bold">&lt;/file&gt;</span>
            <span style="color: #8B008B; font-weight: bold">&lt;file&gt;</span>_sources/build_system.txt<span style="color: #8B008B; font-weight: bold">&lt;/file&gt;</span>
            <span style="color: #228B22">&lt;!-- 省略了 N 多 --&gt;</span>
         <span style="color: #8B008B; font-weight: bold">&lt;/files&gt;</span>
     <span style="color: #8B008B; font-weight: bold">&lt;/filterSection&gt;</span>
 <span style="color: #8B008B; font-weight: bold">&lt;/QtHelpProject&gt;</span>
</pre></div>


<p><br>
这个文件里面的内容太多了, 手写是不可能的&hellip;所以用写个脚本去生成这个文件比较靠谱, 脚本关键性代码如下:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span><span style="color: #228B22"># -*- coding: utf-8 -*-</span>
<span style="color: #8B008B; font-weight: bold">import</span> <span style="color: #008b45; text-decoration: underline">os</span>

files=os.listdir(<span style="color: #CD5555">&#39;\site-packages\PyQt4\doc\html&#39;</span>)
<span style="color: #8B008B; font-weight: bold">for</span> <span style="color: #658b00">file</span> <span style="color: #8B008B">in</span> files:
    <span style="color: #8B008B; font-weight: bold">if</span> <span style="color: #658b00">file</span> != <span style="color: #CD5555">&#39;make_qch.py&#39;</span>:
        title_name = os.path.basename(<span style="color: #658b00">file</span>)
        title_name = title_name.split(<span style="color: #CD5555">&#39;.&#39;</span>, <span style="color: #B452CD">1</span>)[<span style="color: #B452CD">0</span>]
        <span style="color: #658b00">file</span> = <span style="color: #CD5555">&#39;&lt;section title=&quot;&#39;</span> + title_name + <span style="color: #CD5555">&#39;&quot; ref=&quot;&#39;</span> + <span style="color: #658b00">file</span> + <span style="color: #CD5555">&#39;&quot;&gt;&lt;/section&gt;&#39;</span>
        <span style="color: #228B22"># file = &#39;&lt;keyword name=&quot;&#39; + title_name + &#39;&quot; ref=&quot;&#39; + file + &#39;&quot;&gt;&lt;/keyword&gt;&#39;</span>
        <span style="color: #228B22"># file = &#39;&lt;file&gt;_sources/&#39; + file + &#39;&lt;/file&gt;&#39;</span>
        <span style="color: #8B008B; font-weight: bold">print</span> <span style="color: #658b00">file</span>
</pre></div>


<p><br>
然后是用命令生成 <code>pyqtclassreference.qch</code> 文件:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>C:\Python27\Lib\site-packages\PyQt4\doc\html&gt;qhelpgenerator pyqtclassreference.qhp -o pyqtclassreference.qch
Building up file structure...
Insert custom filters...
Insert help data for filter section (1 of 1)...
Insert files...
Insert contents...
Insert indices...
Documentation successfully generated.

C:\Python27\Lib\site-packages\PyQt4\doc\html&gt;
</pre></div>


<p><br>
再把该 pyqtclassreference.qch 文件添加到 Qt Assistant 中就可以了 (编辑 -> 首选项), 下图是添加后的界面:</p>
<p><img alt="" src="http://i64.tinypic.com/2rztls1.jpg"></p>
<p>pyqtclassreference.qch 我也共享了一份生成好的: <a href="http://share.weiyun.com/52a4278e52ef50769583509dbbc76544">传送门</a></p>
            <div align="center" style="color:#ccc;">☠</div>
        </div>
    </article>
</section>
  </article>


</body>
</html>