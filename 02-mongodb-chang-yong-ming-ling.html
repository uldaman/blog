<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <!-- Site Meta Data -->
  <title>02、Mongodb 常用命令</title>
  <meta name="description" content="">
  <meta name="author" content="martin">

  <!-- Style Meta Data -->
  <link rel="stylesheet" href="http://blog.smallcpp.cn/theme/css/notebook.css" type="text/css" />
  <link rel="shortcut icon" href="http://blog.smallcpp.cn/theme/images/avatar.png">

  <!-- Feed Meta Data -->
  <link href="http://blog.smallcpp.cn/" type="application/atom+xml" rel="alternate" title="Small Cpp ATOM Feed" />

  <!-- Twitter Feed -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:image" content="http://blog.smallcpp.cn/theme/images/avatar.png">

<meta name="twitter:creator" content="">
<meta name="twitter:url" content="http://blog.smallcpp.cn/02-mongodb-chang-yong-ming-ling.html">
<meta name="twitter:title" content="Small Cpp ~ 02、Mongodb 常用命令">
<meta name="twitter:description" content="本节笔记记录 Mongodb 的常用命令, 包括创建数据库(文档)、删除数据库(文档) 以及增删改查.">

<!-- Facebook Meta Data -->
<meta property="og:title" content="Small Cpp ~ 02、Mongodb 常用命令" />
<meta property="og:description" content="本节笔记记录 Mongodb 的常用命令, 包括创建数据库(文档)、删除数据库(文档) 以及增删改查." />
<meta property="og:image" content="theme/images/avatar.png" />
</head>

<body>
  <!-- Sidebar -->
  <aside>
    <p><a href="http://blog.smallcpp.cn"><img id="avatar" src="http://blog.smallcpp.cn/theme/images/avatar.png"></a></p>
    <h1>Small Cpp</h1>
    <p>勿在浮沙筑高台, 练从难处练, 用从易处用.</p>
    <hr>
    <h2>Social</h2>
    <ul class="social">
      <a href="http://blog.csdn.net/u010850265">CSDN</a></li>
    </ul>
    <h2>Categories</h2>
    <ul class="navbar">
      <li><a href="http://blog.smallcpp.cn/category/c11.html">C++11</a></li>
      <li><a href="http://blog.smallcpp.cn/category/da-shu-ju.html">大数据</a></li>
      <li><a href="http://blog.smallcpp.cn/category/du-shu-bi-ji.html">读书笔记</a></li>
      <li><a href="http://blog.smallcpp.cn/category/golang.html">Golang</a></li>
      <li><a href="http://blog.smallcpp.cn/category/hei-ke-ji.html">黑科技</a></li>
      <li><a href="http://blog.smallcpp.cn/category/java.html">Java</a></li>
      <li><a href="http://blog.smallcpp.cn/category/linux.html">Linux</a></li>
      <li><a href="http://blog.smallcpp.cn/category/lua.html">Lua</a></li>
      <li class="active"><a href="http://blog.smallcpp.cn/category/mongodb.html">Mongodb</a></li>
      <li><a href="http://blog.smallcpp.cn/category/pyqt.html">PyQt</a></li>
      <li><a href="http://blog.smallcpp.cn/category/python.html">Python</a></li>
      <li><a href="http://blog.smallcpp.cn/category/qt.html">QT</a></li>
      <li><a href="http://blog.smallcpp.cn/category/qu-kuai-lian.html">区块链</a></li>
      <li><a href="http://blog.smallcpp.cn/category/redis.html">Redis</a></li>
      <li><a href="http://blog.smallcpp.cn/category/ruan-jian-she-ji.html">软件设计</a></li>
      <li><a href="http://blog.smallcpp.cn/category/za-xiang.html">杂项</a></li>
    </ul> 
  </aside>

  <!-- Content -->
  <article>
<section id="content">
    <article>
        <header class="post_list">
            <h2 class="post_title"><a href="http://blog.smallcpp.cn/02-mongodb-chang-yong-ming-ling.html" rel="bookmark" title="Permalink to 02、Mongodb 常用命令">02、Mongodb 常用命令</a></h2>
            <span>Par </span>
            <a href="http://blog.smallcpp.cn/author/martin.html">@Martin</a>
            <span> dans </span>
            <span class="post_category"><a href="http://blog.smallcpp.cn/category/mongodb.html" rel="bookmark" title="Permalink to Mongodb">[ Mongodb ]</a></span>
            <span> le </span>
            <span class="post_date">Fri 08 April 2016</span>
            <div></div>
            <div><span>Tags : </span>
            </div>
        </header>
        <div class="entry-content">
            <p>本节笔记记录 Mongodb 的常用命令, 包括创建数据库(文档)、删除数据库(文档) 以及增删改查.</p>
<div class="toc">
<ul>
<li><a href="#_1">创建数据库(文档)</a></li>
<li><a href="#_2">删除数据库(文档)</a></li>
<li><a href="#_3">插入数据</a></li>
<li><a href="#_4">删除文档</a></li>
<li><a href="#_5">修改数据</a></li>
<li><a href="#_6">查询数据</a><ul>
<li><a href="#_7">基础查询</a></li>
<li><a href="#_8">过滤返回字段</a></li>
<li><a href="#_9">条件查询</a></li>
<li><a href="#_10">嵌套条件查询</a></li>
<li><a href="#_11">不包含字段查询</a></li>
<li><a href="#_12">复合条件查询</a><ul>
<li><a href="#or">OR 条件</a></li>
<li><a href="#in">IN 条件</a></li>
<li><a href="#and">AND 条件</a></li>
<li><a href="#all">ALL 条件</a></li>
<li><a href="#_13">正则查询</a></li>
<li><a href="#_14">投影</a></li>
<li><a href="#_15">分页</a><ul>
<li><a href="#limit">Limit()</a></li>
<li><a href="#skip">Skip()</a></li>
</ul>
</li>
<li><a href="#_16">排序</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>首先, 要先进入 Mongodb Client 交互环境:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; mongo
MongoDB shell version: 3.0.6
connecting to: test
...
</pre></div>


<p><br></p>
<h2 id="_1">创建数据库(文档)</h2>
<p><strong>命令格式:</strong></p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>use DATABASE_NAME
</pre></div>


<p><br>
如果数据库不存在, 则创建数据库并切换过去, 否则直接切换到指定数据库.</p>
<p><strong>实例:</strong></p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; use runoob
switched to db runoob
&gt; db
runoob
&gt;
</pre></div>


<p><br>
现在我们创建一个新数据库 runoob, 然后 db 命令查看当前所在的数据库, 就会当前环境看到已经切换到 runoob 数据库中了..</p>
<p>使用 <strong>show dbs</strong> 命令可以查看所有已存在的数据库:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; show dbs
local  0.078GB
test   0.078GB
&gt;
</pre></div>


<p><br>
但是, 我们发现刚创建的数据库 runoob 并不在数据库的列表中, 要显示它, 我们需要向 runoob 数据库插入一些数据, 关于如何插入数据, 请参考下面的笔记.</p>
<h2 id="_2">删除数据库(文档)</h2>
<p><strong>命令格式:</strong></p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.dropDatabase()
</pre></div>


<p><br>
删除当前所在数据库</p>
<p><strong>实例:</strong><br>
首先, 查看所有数据库:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; show dbs
local   0.078GB
runoob  0.078GB
test    0.078GB
</pre></div>


<p><br>
切换到待删除数据库 runoob:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; use runoob
switched to db runoob
&gt;
</pre></div>


<p><br>
执行删除命令:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; db.dropDatabase()
{&quot;dropped&quot;: &quot;runoob&quot;, &quot;ok&quot;: 1}
</pre></div>


<p><br>
最后, 再通过 show dbs 命令数据库是否删除成功:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; show dbs
local  0.078GB
test   0.078GB
&gt;
</pre></div>


<p><br></p>
<h2 id="_3">插入数据</h2>
<p><strong>命令格式:</strong><br>
MongoDB 使用 <strong>insert()</strong> 或 <strong>save()</strong> 方法向<strong>集合</strong>中插入文档:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.COLLECTION_NAME.insert(document)
</pre></div>


<p><br>
这里提到一个<strong>集合</strong> 和 <strong>document</strong> 的概念.</p>
<p>什么是<strong>集合</strong>?<br>
用常规的思维来说, <strong>集合</strong>对应的就是数据库中的<strong>表</strong>, 当我们插入数据的时候, 是向&rdquo;表&rdquo;中插入数据.<br>
现在可以总结出 Mongodb 与 MySQL 对照关系如下:</p>
<table>
<thead>
<tr>
<th>Mongodb</th>
<th>MySQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>文档</td>
<td>数据库</td>
</tr>
<tr>
<td>集合</td>
<td>表</td>
</tr>
</tbody>
</table>
<p>OK, 现在知道什么是<strong>集合</strong>了, 那什么是 <strong>document</strong>?</p>
<ul>
<li>文档的数据结构和 JSON 基本一样</li>
<li>所有存储在集合中的数据都是 <strong>BSON</strong> 格式<ul>
<li>BSON 是类 json 的一种二进制形式的存储格式, 即 Binary JSON</li>
</ul>
</li>
</ul>
<p>对于常用 Python 的我来说, 更喜欢把它说成是一种 <strong>Dict</strong> 结构.</p>
<p><strong>实例:</strong><br>
首先, 创建一个新数据库:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; use runoob
switched to db runoob
&gt; db
runoob
&gt;
</pre></div>


<p><br>
然后向 <strong>runoob</strong> 数据库的 <strong>col</strong> 集合中插入数据:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.col.insert({name: &#39;MongoDB 教程&#39;, age: 18})
</pre></div>


<p><br>
<strong>col</strong> 是我们的集合名, 如果该集合不在当前所处的数据库中, MongoDB 会自动创建该集合并插入文档.</p>
<p>MongoDB 数据中的<strong>字段都是字符串格式的</strong>, 但是 MongoDB 做了优化, 通常我们可以可以省略引号.</p>
<p>每个已插入的数据, MongoDB 都会为它分配一个 <strong>_id</strong> 字段, 当然, 也可以在插入数据时<strong>显示</strong>的指定 <strong>_id</strong> 字段, 但是要注意, <strong>_id</strong> 字段是不可重复的, 如果使用 <strong>insert()</strong> 插入相同 <strong>_id</strong> 的数据, 会报错, 不过可以使用 <strong>save()</strong> 方法:</p>
<ul>
<li>如果不指定 <strong>_id</strong> 字段 save() 方法类似于 insert() 方法</li>
<li>如果指定 <strong>_id</strong> 字段, 则会更新该 <strong>_id</strong> 的数据<ul>
<li>如果指定 <strong>_id</strong> 不存在, 也类似于 insert() 方法</li>
</ul>
</li>
</ul>
<p>现在可以通过 <strong>find()</strong> 命令查看已插入的数据, 关于<strong>查询</strong>的命令详细用法请继续参考下面的笔记, 这里仅测试下 <strong>_id</strong> 字段&hellip;</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; db.col.find()
{&quot;_id&quot;: ObjectId(&quot;56064886ade2f21f36b03134&quot;), &quot;name&quot;: &quot;MongoDB 教程&quot;, &quot;age&quot;: 18}
&gt;
</pre></div>


<p><br>
可以看到刚才插入的数据有了一个 <strong>_id</strong> 字段, 使用该字段可以对数据进行 删、改、查.</p>
<h2 id="_4">删除文档</h2>
<p><strong>remove()</strong> 方法用来移除集合中的数据</p>
<p><strong>命令格式:</strong></p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.collection.remove(
   {query},
   {justOne}
)
</pre></div>


<p><br></p>
<p>参数说明:</p>
<ul>
<li>query: 匹配条件条件, 如 {name: &lsquo;张三&rsquo;}</li>
<li>justOne: 可选, 如果设为 true 或 1, 则只删除一个文档, 默认删除所有匹配文档, 如 {justOne: true}</li>
</ul>
<p>如果想删除所有数据, 可以使用以下方式:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.col.remove({})
</pre></div>


<p><br></p>
<h2 id="_5">修改数据</h2>
<p>可以使用 <strong>update()</strong> 和 <strong>save()</strong> 方法来更新集合中的文档.</p>
<ul>
<li><strong>update()</strong> 用于更新已存在的文档, 当然它也支持插入新文档, 但它的本质还是更新</li>
<li><strong>save()</strong> 通过传入的文档来替换已有文档, 它的本质是用新文档覆盖掉旧文档</li>
</ul>
<p><strong>update()</strong><br></p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.collection.update(
   {query},
   {update},
   {
     upsert: &lt;boolean&gt;,
     multi: &lt;boolean&gt;,
     writeConcern: &lt;document&gt;
   }
)
</pre></div>


<p><br>
参数说明:</p>
<ul>
<li>query: 匹配条件, 直接写 {} 表示匹配所有</li>
<li>update: 更新内容, 支持多种操作符<ul>
<li>$set: {$set: {field: value}} 为 field 设置新值, 如果 field 不存在, 则为文档添加 field</li>
<li>$unset: {$unset: {field: value}} 删除 field, 这里 value 为 true 或 1</li>
<li>$inc: {$inc: {field: value}} field 的值加上 value, 支持负数</li>
<li>$max: {$max: {field: value}} 增量修改, 只有 value 大于原有的 value 时, 才会修改成功</li>
<li>$min: {$min: {field: value}} 减量修改, 只有 value 小于原有的 value 时, 才会修改成功</li>
<li>$rename: {$rename: {old_field_name: new_field_name}} 字段重命名</li>
<li>$setOnInsert: {$setOnInsert: {field: value}} 只有当是新插入时才执行, 所以要配合 upsert 使用</li>
</ul>
</li>
<li>upsert: 可选, {upsert: bool} 如果匹配失败, 是否插入新数据, 默认是 false, 不插入</li>
<li>multi: 可选, {multi: bool} 是否更新多条数据, 默认是 false, 只更新找到的第一条记录, 如果这个参数为 true, 就把按条件查出来多条记录全部更新</li>
<li>writeConcern: 可选, 抛出异常的级别</li>
</ul>
<p><strong>save()</strong><br></p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.collection.save(
   {document},
   {
     writeConcern: &lt;document&gt;
   }
)
</pre></div>


<p><br>
参数说明:</p>
<ul>
<li>document: 文档数据</li>
<li>writeConcern: 可选, 抛出异常的级别</li>
</ul>
<h2 id="_6">查询数据</h2>
<h3 id="_7">基础查询</h3>
<p><strong>命令格式:</strong><br>
MongoDB 使用 <strong>find()</strong> 或 <strong>findOne()</strong> 方法从<strong>集合</strong>中插查询数据:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.COLLECTION_NAME.find()
&gt;db.col.find().pretty()
</pre></div>


<p><br>
find() 方法以<strong>非结构化</strong>的方式来显示所有文档, 如果需要以易读的<strong>结构化</strong>方式来读取数据, 可以使用 <strong>pretty()</strong> 方法.</p>
<p><strong>实例</strong><br>
查询 col 集合中的数据:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; db.col.find().pretty()
{
        &quot;_id&quot; : ObjectId(&quot;56063f17ade2f21f36b03133&quot;),
        &quot;name&quot;: &quot;MongoDB 教程&quot;,
        &quot;age&quot;: 18
}
</pre></div>


<p><br>
细心同学可能已经发现, 上面查询结果中字段都是<strong>字符串</strong>格式(_id、name、age 都用引号包起来了).</p>
<h3 id="_8">过滤返回字段</h3>
<p>通过 find() 的第二个参数可以指定返回的字段.</p>
<p>例如, 只想返回 name 字段:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; db.col.find({}, {&#39;name&#39;: 1}).pretty()
{
        &quot;_id&quot; : ObjectId(&quot;56063f17ade2f21f36b03133&quot;),
        &quot;name&quot;: &quot;MongoDB 教程&quot;,
}
</pre></div>


<p><br>
注意, _id 总是返回的.</p>
<p>或者指定哪些字段不返回:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt; db.col.find({}, {&#39;_id&#39;: 0}).pretty()
{
        &quot;name&quot;: &quot;MongoDB 教程&quot;,
        &quot;age&quot;: 18
}
</pre></div>


<p><br>
可以看到, 这种方式可以过滤掉 _id 字段.</p>
<h3 id="_9">条件查询</h3>
<p>MongoDB 的 <strong>find()</strong> 和 <strong>findOne()</strong> 都支持条件语句的查询, 它们与 SQL 语句的对应关系如下表:</p>
<blockquote>
<p>注意, MongoDB 的条件也是 document 类型(Dict)</p>
</blockquote>
<table>
<thead>
<tr>
<th>操作</th>
<th>格式</th>
<th>范例</th>
<th>SQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>等于</td>
<td _key_62_:="&lt;key>:" _value_62_="&lt;value>"></td>
<td _name_:="'name':" _菜鸟教程_="'菜鸟教程'">db.col.find(</td>
<td>where name = &lsquo;菜鸟教程&rsquo;</td>
</tr>
<tr>
<td>小于</td>
<td _key_62_:="&lt;key>:" _lt:_value_62_="{$lt:&lt;value>"></td>
<td _age_:="'age':" _lt:50="{$lt:50">db.col.find(</td>
<td>where age &lt; 50</td>
</tr>
<tr>
<td>小于等于</td>
<td _key_62_:="&lt;key>:" _lte:_value_62_="{$lte:&lt;value>"></td>
<td _age_:="'age':" _lte:50="{$lte:50">db.col.find(</td>
<td>where age &lt;= 50</td>
</tr>
<tr>
<td>大于</td>
<td _gt:_value_62_="{$gt:&lt;value>" _key_62_:="&lt;key>:"></td>
<td _age_:="'age':" _gt:50="{$gt:50">db.col.find(</td>
<td>where age &gt; 50</td>
</tr>
<tr>
<td>大于等于</td>
<td _gte:_value_62_="{$gte:&lt;value>" _key_62_:="&lt;key>:"></td>
<td _age_:="'age':" _gte:50="{$gte:50">db.col.find(</td>
<td>where age &gt;= 50</td>
</tr>
<tr>
<td>不等于</td>
<td _key_62_:="&lt;key>:" _ne:_value_62_="{$ne:&lt;value>"></td>
<td _age_:="'age':" _ne:50="{$ne:50">db.col.find(</td>
<td>where age != 50</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="_10">嵌套条件查询</h3>
<p>因为 MongoDB 中存储的数据是 document(Dict), 所以有些 key 中保存的 value 可能是另一个 document(Dict), 此时, 我们可以用<strong>嵌套条件</strong>来查询到嵌套在 value 中的子 document(Dict), 语法格式就是<strong>点号</strong>.</p>
<p>先插入一条嵌套数据:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.col.insert({name: &#39;张三&#39;, age: 18, school: {name: &#39;交通大学&#39;, city: &#39;上海&#39;}})
</pre></div>


<p><br>
如果想要根据学校名字来查询数据, 就可以用下面这种嵌套条件:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.col.find({&#39;school.name&#39;: &#39;交通大学&#39;}).pretty()
</pre></div>


<p><br></p>
<h3 id="_11">不包含字段查询</h3>
<p>这种查询是查询集合中<strong>没有某个字段</strong>的数据.</p>
<p>先插入两条数据:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.col.insert({name: &#39;张三&#39;, age: 18)
&gt;db.col.insert({name: &#39;李四&#39;)
</pre></div>


<p><br>
现在需求查询没有 age 字段的数据, 方法如下:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.col.find({&#39;age&#39;: {$exists:false}})
</pre></div>


<p><br></p>
<h3 id="_12">复合条件查询</h3>
<h4 id="or">OR 条件</h4>
<p>OR 条件语句使用了关键字 <strong>$or</strong>, 语法格式如下:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.col.find(
   {
      $or: [
         {key1: value1}, {key2:value2}
      ]
   }
).pretty()
</pre></div>


<p><br></p>
<h4 id="in">IN 条件</h4>
<p>in 条件语句, 也是一种或者逻辑, 使用了关键字 <strong>$in</strong>, 但它与 or 不同, or 是在不同的 field 之间或者, 而 in 是在同一个 field 间或者, 并且支持对<strong>数组</strong>型元素进行查询</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.col.find({key1: {$in: [value1, value2]}}).pretty()
</pre></div>


<p><br>
匹配 key1 的值为 value1 或者 value2 的元素, 或者匹配包含有 value1 / value2 的数组元素.</p>
<h4 id="and">AND 条件</h4>
<p>OR 条件语句可以使用了关键字 <strong>$and</strong>, 也可以直接在条件 document 中可以传入多个键(key), 每个键(key)以<strong>逗号</strong>隔开.</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.col.find(
   {
      $and: [
         {key1: value1}, {key2:value2}
      ]
   }
).pretty()


&gt;db.col.find({key1:value1, key2:value2}).pretty()
</pre></div>


<p><br></p>
<h4 id="all">ALL 条件</h4>
<p>ALL 条件用来对数组中的元素进行全匹配, 使用了关键字 <strong>$all</strong>.</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>&gt;db.col.find({key1: {$all: [value1, value2]}}).pretty()
</pre></div>


<p><br>
首先, key1 要是个数组, 如 [value1, value2 &hellip;]<br>
该语句匹配同时包含元素 value1 和 value2 的数组.</p>
<h4 id="_13">正则查询</h4>
<p>MongoDB 的查询也是支持正则的, 但是正则查询的效率是比较低的, 建议只对建立了索引的 field 进行正则.</p>
<h4 id="_14">投影</h4>
<p>投影意思是只查询必要的字段而不是查询所有的字段, 例如一个文档有 5 个字段, 需要显示的只有 3 个, 此时就可以用投影.</p>
<p>find() 方法的第二个可选参数是要投影的字段列表, 在该参数中设置的字段列表值 1 或 0</p>
<ul>
<li>1 用来显示字段</li>
<li>0 用来隐藏字段</li>
</ul>
<p>语法:
find() 方法具有投影基本语法如下</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.COLLECTION_NAME.find({}, {KEY1: 1, KEY1: 0})
</pre></div>


<p><br>
请注意 <strong>_id</strong> 字段始终显示, 如果不想这个字段, 那么需要将其设置为 0:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.COLLECTION_NAME.find({}, {KEY: 1, _id: 0})
</pre></div>


<p><br></p>
<h4 id="_15">分页</h4>
<p>MongoDB 的分页功能需要用到两个方法: <strong>Limit()</strong> 和 <strong>Skip()</strong></p>
<h5 id="limit">Limit()</h5>
<p>limit() 方法接受一个数字参数, 该参数指定读取的记录条数.</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.COLLECTION_NAME.find().limit(number)
</pre></div>


<p><br></p>
<h5 id="skip">Skip()</h5>
<p>skip() 方法用来跳过指定数量的数据, skip() 方法同样接受一个数字参数作为跳过的记录条数</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.COLLECTION_NAME.find().skip(number)
</pre></div>


<p><br>
配合 <strong>Limit()</strong> 和 <strong>Skip()</strong> 就能实现分页查询的功能, 例如每页面显示 10 条数据, 想显示第 5 页的数据:</p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.COLLECTION_NAME.find().skip(4 * 10).limit(10)
</pre></div>


<p><br></p>
<h4 id="_16">排序</h4>
<p><strong>命令格式:</strong></p>
<div class="codehilite" style="background: #eeeedd"><pre style="line-height: 125%"><span></span>db.COLLECTION_NAME.find().sort({KEY: 1})
</pre></div>


<p><br>
Key 可以设为 1 或者 -1, 1 用于升序排列, 而 -1 用于降序.</p>
<p><strong>注意:</strong> 排序是一个耗性能的操作, 建议只对建立了<strong>索引</strong>的 key 进行排序.</p>
            <div align="center" style="color:#ccc;">☠</div>
        </div>
    </article>
</section>
  </article>


</body>
</html>